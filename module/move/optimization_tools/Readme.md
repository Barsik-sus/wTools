<!-- {{# generate.module_header{} #}} -->

# Module :: optimization_tools
[![experimental](https://raster.shields.io/static/v1?label=stability&message=experimental&color=orange&logoColor=eee)](https://github.com/emersion/stability-badges#experimental) [![rust-status](https://github.com/Wandalen/wTools/actions/workflows/ModuleGraphsToolsPush.yml/badge.svg)](https://github.com/Wandalen/wTools/actions/workflows/ModuleGraphsToolsPush.yml) [![docs.rs](https://img.shields.io/docsrs/optimization_tools?color=e3e8f0&logo=docs.rs)](https://docs.rs/optimization_tools) [![Open in Gitpod](https://raster.shields.io/static/v1?label=try&message=online&color=eee&logo=gitpod&logoColor=eee)](https://gitpod.io/#RUN_PATH=.,SAMPLE_FILE=sample%2Frust%2Foptimization_tools_trivial_sample%2Fsrc%2Fmain.rs,RUN_POSTFIX=--example%20optimization_tools_trivial_sample/https://github.com/Wandalen/wTools) [![discord](https://img.shields.io/discord/872391416519737405?color=eee&logo=discord&logoColor=eee&label=ask)](https://discord.gg/m3YfbXpUUY)

# Hybrid optimization using Simulated Annealing and Genetic Algorithm

## Resources:
 - ### Simulated Annealing:
   - https://www.youtube.com/watch?v=21EDdFVMz8I
 - ### Genetic Algorithms
   - https://www.youtube.com/watch?v=S8LdYxA5-8U
## Results
 - [Traveling Salesman Problem](tsp_results.md)
 - [Solving Sudoku Puzzle](sudoku_results.md)

# Sudoku Genetic Algorithm
## Initialization

 - **Initial Population:** The initial population is generated by randomly filling each block in the Sudoku board with unique numbers.

 ## Fitness Calculation

 - **Fitness Function:** The fitness of an individual is calculated as the number of errors in the Sudoku board.

 ## Population Generation

 - **Elitism:** A percentage of the new population is generated from the fittest individuals, determined by the `elite_selection_rate` in `GAConfig`.
 - **Random Selection:** Another percentage of the new population is generated from randomly chosen individuals, based on the `random_selection_rate` in `GAConfig`.
 - **Crossover:** The rest of the new population is generated as offspring from the crossover of random pairs of individuals, selected using the tournament method.

 ## Tournament Selection

 - **Tournament Participants:** Participants for the tournament are randomly selected from the population. The number of participants is defined by the `tournament_size` in `GAConfig`.
 - **Selection Pressure:** The likelihood of the fittest participant winning is determined by the `tournament_selection_pressure` in `GAConfig`.

 ## Crossover

Crossover strategies:
 - One crossover point, randomly chosen. All blocks before the point are taken from first parent, all blocks after the point are taken from second parent. At least one block from each parent.
 - Multiple crossover points, generated by choosing:
    - random number `m` of blocks to take from the first parent;
    - `m` block idices;
    
    To build the child iterate over blocks, if previously selected indices contain currents block index, then this block is taken from the first parent otherwise it comes from the second parent.
 - Selecting crossover points based on fitness of parents:
    - obtain scores for each of three rows that constitute three blocks of parents,
    - blocks with the lowest error are then inherited by child,
    - same method is then used for columns of parents columns.

 ## Mutation

 - **Mutation Rate:** The new population is further modified by applying mutations to some individuals. The likelihood of an individual being mutated is determined by the `mutation_rate` in `GAConfig`.


## Solving sudoku puzzles using Simulated Annealing algorithm

Simulated Annealing is a probabilistic optimization algorithm inspired by the annealing process in metallurgy. It is often used to find near-optimal solutions to combinatorial optimization problems. Simulated Annealing is known for its ability to escape local optima and explore a broader solution space, making it suitable for complex optimization problems, like solving of sudoku puzzle.

Simulated Annealing starts with an initial solution and iteratively explores neighboring solutions. It accepts better solutions with certainty but occasionally accepts worse solutions with a decreasing probability over time. The algorithm maintains a temperature parameter that controls the likelihood of accepting worse solutions. As the algorithm progresses, the temperature decreases, and the acceptance of worse solutions becomes less probable.

#### Sudoku

Sudoku is a classic number puzzle game that involves filling a 9x9 grid with digits. The puzzle begins with some cells already filled with numbers, and the goal is to complete the grid following specific rules - every row, column and 3x3 block must contain unique digits from 1 to 9.

## Finding optimal parameters for Hybrid Optimizer using Nelder-Mead algorithm

### About Nelder-Mead algorithm:

The Nelder-Mead method, also known as the downhill simplex method, is an optimization algorithm used to find the minimum (or maximum) of a function in a multidimensional space. It is useful for optimizing functions that are not well-behaved or have unknown derivatives. It has several stages:

- Simplex Initialization:
Calculate initial simplex, which is a geometric shape formed by n+1 points in an n-dimensional space. These points represent candidate solutions.

- Reflection, Expansion, Contraction, and Shrinkage:
During each iteration, the method evaluates the function at each simplex point. Based on these evaluations, it performs operations like reflection, expansion, contraction, or shrinkage to adjust the simplex.

- Updating Simplex:
Depending on the evaluation results, the simplex is updated to move towards the optimum. This process continues iteratively until a termination criterion is met.

- Termination:
Termination criteria can include reaching a maximum number of iterations, achieving a desired level of accuracy, or satisfying specific conditions related to the function values. The algorithm outputs the best point found, which corresponds to the minimum (or maximum) of the function.

### More:

 - [Video explanation](https://www.youtube.com/watch?v=-GWze-wtu60)
 - [Wikipedia page](https://en.wikipedia.org/wiki/Nelder%E2%80%93Mead_method)

### Using Nelder-Mead method for Hybrid Optimizer parameters:

 - Method `optimize` of nelder_mead::Optimizer struct : uses passed strarting point, 
 - Function `optimize_by_time` : wrapper around Nelder-Mead
 - Function `find_hybrid_optimal_params` : 

